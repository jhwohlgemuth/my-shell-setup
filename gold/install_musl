#! /bin/bash
set -e

requires \
    curl \
    make
main() {
    local VERSION="${1:-"1.2.5"}"
    curl "https://musl.libc.org/releases/musl-${VERSION}.tar.gz" -o /tmp/musl.tar.gz
    tar -xvf /tmp/musl.tar.gz --directory /tmp
    pushd "/tmp/musl-${VERSION}" > /dev/null || exit
    ./configure --exec-prefix="/usr/local"
    make && make install
    popd > /dev/null || exit
    requires musl-gcc
}
main "$@"
